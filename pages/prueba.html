<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Prueba Supabase</title>

  <!-- Supabase JS v2 -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

    <h1>esta si es V4</h1>
<script>
(async () => {

  // ðŸ‘‡ createClient viene global
  const client = supabase.createClient(
    'https://iryiobhmmvdnvwfovuye.supabase.co',
    'sb_publishable__ebSt_oeNFqErCtk1ZUfSg_P0V6vNt7'
  )

  const { data: loginData, error: loginError } =
    await client.auth.signInWithPassword({
      email: 'blenderparatodos@gmail.com',
      password: 'Bogota*2025'
    })

  console.log('login:', loginData, loginError)

  const { data, error } = await client
    .from('usuarios')
    .select('*')

  console.log('usuarios:', data, error)

    const { data: rolesData, error: rolesError } = await client
      .from('roles')
      .select('*')
    console.log('roles:', rolesData, rolesError)


    // AREAS
    const { data: areasData, error: areasError } = await client
    .from('areas')
    .select('*')
    console.log('areas:', areasData, areasError)

    // USUARIO_AREA
    const { data: usuarioAreaData, error: usuarioAreaError } = await client
    .from('usuarioArea')
    .select('*')
    console.log('usuarioArea:', usuarioAreaData, usuarioAreaError)

    // USUARIO_ROL
    const { data: usuarioRolData, error: usuarioRolError } = await client
    .from('usuarioRol')
    .select('*')
    console.log('usuarioRol:', usuarioRolData, usuarioRolError)

    // creando usuario

    const { data: authData, error: authError } = await client.auth.admin.createUser({
        email: 'santiago.reyes@cun.edu.co',
        password: 'Bogota*2025',
        email_confirm: true // Marca el correo como confirmado
    });

    if (authError) {
        console.error('Error creando usuario en Auth:', authError);
    } else {
        console.log('Usuario creado en Auth:', authData);
    }

})();
</script>

</body>
</html>
